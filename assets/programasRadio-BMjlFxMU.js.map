{"version":3,"file":"programasRadio-BMjlFxMU.js","sources":["../../src/component/radio/lineup.jsx","../../src/image/app/espera.webp","../../src/component/radio/programasRadio.jsx"],"sourcesContent":["import React from 'react';\nimport styles from './lineup.module.css';\n\n// Componente Lineup\nconst Lineup = ({ programacionAnterior, programacionActual, programacionProxima }) => {\n  return (\n    <div className={styles.lineupContainer}>\n      <div className={styles.timeline}>\n        {/* Punto de la programación anterior */}\n        <div className={styles.point}>\n          <span className={styles.time2}>{programacionAnterior.startTime}</span>\n          <span className={styles.label}>{programacionAnterior.title}</span>\n        </div>\n\n        {/* Punto de la programación actual */}\n        <div className={`${styles.point} ${styles.current}`}>\n          <span className={styles.time}>{programacionActual.startTime}</span>\n          {/* <span className={styles.label}>{programacionActual.title}</span> */}\n        </div>\n\n        {/* Punto de la próxima programación */}\n        <div className={styles.point}>\n          <span className={styles.time2}>{programacionProxima.startTime}</span>\n          <span className={styles.label}>{programacionProxima.title}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Lineup;","export default \"__VITE_ASSET__CY76p4wb__\"","import { useEffect, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport Lineup from './lineup';\nimport { programacionSemanal } from '../../data/radio';\nimport styles from './radio.module.css';\nimport noProgramImage from '../../image/app/espera.webp';\nimport * as Icons from '../icons'; // Importa tus iconos\n\nconst obtenerProgramacionDelDia = () => {\n  const diasSemana = ['domingo', 'lunes', 'martes', 'miercoles', 'jueves', 'viernes', 'sabado'];\n  const hoy = new Date().getDay();\n  return programacionSemanal[diasSemana[hoy]] || [];\n};\n\nconst ProgramasRadio = () => {\n  const [programaActual, setProgramaActual] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [userInteracted, setUserInteracted] = useState(false);\n  const audioRef = useRef(new Audio());\n\n  const programacionHoy = obtenerProgramacionDelDia();\n  const indexActual = programacionHoy.findIndex(p => p.title === programaActual?.title);\n  const indexAnterior = Math.max(0, indexActual - 1);\n  const indexProximo = Math.min(programacionHoy.length - 1, indexActual + 1);\n\n  useEffect(() => {\n    const verificarProgramacion = () => {\n      const ahora = new Date();\n      const horaActual = ahora.getHours() * 60 + ahora.getMinutes();\n\n      if (programacionHoy.length === 0) return;\n\n      const programaEncontrado = programacionHoy.find(programa => {\n        const [startHours, startMinutes] = programa.startTime.split(':').map(Number);\n        const startTimeEnMinutos = startHours * 60 + startMinutes;\n        const [endHours, endMinutes] = programa.endTime.split(':').map(Number);\n        const endTimeEnMinutos = endHours * 60 + endMinutes;\n\n        return horaActual >= startTimeEnMinutos && horaActual < endTimeEnMinutos;\n      });\n\n      if (programaEncontrado) {\n        if (!programaActual || programaActual.src !== programaEncontrado.src) {\n          setProgramaActual(programaEncontrado);\n          audioRef.current.src = programaEncontrado.src;\n\n          // Calcula el tiempo transcurrido desde el inicio del programa\n          const [startHours, startMinutes] = programaEncontrado.startTime.split(':').map(Number);\n          const startTimeEnMinutos = startHours * 60 + startMinutes;\n          const tiempoTranscurrido = (horaActual - startTimeEnMinutos) * 60; // en segundos\n\n          // Establece el tiempo actual del audio\n          audioRef.current.currentTime = Math.max(0, tiempoTranscurrido);\n          if (userInteracted) {\n            audioRef.current.play().catch(err => {\n              console.error(\"Error al intentar reproducir el audio: \", err);\n            });\n            setIsPlaying(true);\n          }\n        }\n      } else {\n        if (isPlaying) {\n          audioRef.current.pause();\n          setIsPlaying(false);\n          setProgramaActual(null);\n        }\n      }\n    };\n\n    const intervalo = setInterval(verificarProgramacion, 20000); // Intervalo reducido a 20 segundos\n    verificarProgramacion();\n\n    return () => clearInterval(intervalo);\n  }, [programaActual, isPlaying, userInteracted, programacionHoy]);\n\n  const manejarReproduccion = () => {\n    if (isPlaying) {\n      audioRef.current.pause();\n      setIsPlaying(false);\n    } else {\n      audioRef.current.play().catch(err => {\n        console.error(\"Error al intentar reproducir el audio: \", err);\n      });\n      setIsPlaying(true);\n    }\n  };\n\n  const handleUserInteraction = () => {\n    setUserInteracted(true);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 1.005 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: .4, ease: 'easeInOut' }}\n      className={styles.radioContainer}\n      onClick={handleUserInteraction}\n    >\n      {programaActual ? (\n        <>\n          <button className={styles.onAirButton}>\n            ON AIR\n            <div className={styles.led}></div>\n          </button>\n  \n          <div className={styles.coverContainer}>\n            <div className={styles.blurBackground} style={{ backgroundColor: programaActual.color || '#000000' }}></div>\n          \n            <div className={styles.imagePlaceholder}>\n              <img \n                src={programaActual.cover} \n                alt=\"Portada del programa\" \n                className={styles.coverImage} \n                onLoad={() => console.log('Imagen cargada')}\n              />\n            </div>\n  \n            <h2 className={styles.programTitle}>{programaActual.title}</h2>\n          </div>\n  \n          <button onClick={manejarReproduccion} className={styles.playPauseButton}>\n            <div className={styles.iconWrapper}>\n              {isPlaying ? (\n                <Icons.Pause className={styles.icon} />\n              ) : (\n                <Icons.Play className={styles.icon} />\n              )}\n            </div>\n          </button>\n  \n          <Lineup\n            programacionAnterior={programacionHoy[indexAnterior]}\n            programacionActual={programaActual}\n            programacionProxima={programacionHoy[indexProximo]}\n          />\n        </>\n      ) : (\n        <div className={styles.noProgramContainer}>\n          <img src={noProgramImage} alt=\"No hay programación\" className={styles.noProgramImage} />\n          <p className={styles.noProgramText}>No hay programación <br /> en este momento.</p>\n          <Link to=\"/djs\" className={styles.viewPlaylistsButton}>Descubrir</Link>\n        </div>\n      )}\n    </motion.div>\n  );\n};\n\nexport default ProgramasRadio;"],"names":["Lineup","programacionAnterior","programacionActual","programacionProxima","jsx","styles","jsxs","noProgramImage","obtenerProgramacionDelDia","diasSemana","hoy","programacionSemanal","ProgramasRadio","programaActual","setProgramaActual","useState","isPlaying","setIsPlaying","userInteracted","setUserInteracted","audioRef","useRef","programacionHoy","indexActual","p","indexAnterior","indexProximo","useEffect","verificarProgramacion","ahora","horaActual","programaEncontrado","programa","startHours","startMinutes","startTimeEnMinutos","endHours","endMinutes","endTimeEnMinutos","tiempoTranscurrido","err","intervalo","manejarReproduccion","handleUserInteraction","motion","Fragment","Icons.Pause","Icons.Play","Link"],"mappings":"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"}