import{j as s,r as a,u as b,I as y}from"./index-Df_150rz.js";const C=()=>s.jsxs("nav",{className:"bottom-nav",children:[s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-home"})}),s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-search"})}),s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-plus"})}),s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-commenting"})}),s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-user"})})]});let p=[];function k(e){const[d,i]=a.useState(!1),t=a.useMemo(()=>new IntersectionObserver(([c])=>{i(c.isIntersecting),c.isIntersecting&&p.forEach(u=>{u!==e.current?u.pause():u.play()})}),[]);return a.useEffect(()=>(p.push(e.current),t.observe(e.current),()=>{p=p.filter(c=>c!==e.current),t.disconnect()}),[e,t]),d}const E="/assets/mixtape-B4dAbi3V.svg",S="_sliderContainer_2gfd2_1",$="_sliderWrapper_2gfd2_17",w="_sliderChildren_2gfd2_26",L="_audioContent_2gfd2_61",P="_backgroundImage_2gfd2_91",B="_playing_2gfd2_103",O="_songImage_2gfd2_108",T="_audioOverlay_2gfd2_127",V="_playIcon_2gfd2_140",A="_progressBar_2gfd2_147",n={sliderContainer:S,sliderWrapper:$,sliderChildren:w,audioContent:L,backgroundImage:P,playing:B,songImage:O,audioOverlay:T,playIcon:V,progressBar:A},D="_container_ovl0p_10",M="_slider_ovl0p_31",R="_circle_ovl0p_58",U="_active_ovl0p_72",f={container:D,slider:M,circle:R,active:U,"dark-mode":"_dark-mode_ovl0p_81","light-mode":"_light-mode_ovl0p_87"},W=()=>{const[e,d]=a.useState(!1),i=b(),t=()=>{document.body.classList.toggle("dark-mode"),d(!e),i(e?"/":"/4b")};return s.jsx("div",{className:f.container,children:s.jsx("div",{className:`${f.slider} ${e?f.active:""}`,onClick:t,children:s.jsx("div",{className:f.circle})})})},q=({index:e,songName:d,songimg:i,songCut:t,author:c,authorLink:u,setCurrentPlaying:o,currentPlaying:g})=>{const l=a.useRef(),h=k(l),[_,m]=a.useState(!0),[v,j]=a.useState(0);a.useEffect(()=>{l.current;const r=()=>{h&&g!==e&&o(e)};return r(),window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[h,g,e,o]),a.useEffect(()=>{const r=l.current;g===e?(r.play(),m(!1)):(r.pause(),m(!0))},[g,e]);const x=()=>{l.current.paused?(l.current.play(),m(!1),o(e)):(l.current.pause(),m(!0))},N=()=>{const r=l.current;if(r){const I=r.currentTime/r.duration*100;j(I)}};return s.jsxs("div",{className:n.sliderChildren,children:[s.jsx("div",{className:`${n.backgroundImage} ${_?"":n.playing}`,style:{backgroundImage:`url(${i})`}}),s.jsx("img",{src:i,alt:d,className:`${n.songImage} ${_?"":n.playing}`}),s.jsx("audio",{className:n.audio,ref:l,id:e,onTimeUpdate:N,children:s.jsx("source",{src:t,type:"audio/mp3"})}),s.jsx("div",{className:n.audioOverlay,onClick:x,children:_&&s.jsx("img",{src:E,alt:"Play",className:n.playIcon})}),s.jsxs("div",{className:n.audioContent,children:[s.jsxs("p",{className:"m-0",children:["@",c]}),s.jsxs("p",{children:["Post by ",s.jsx("a",{href:u,children:c})," en Mixtape"]})]}),s.jsx(W,{}),s.jsx("div",{className:n.progressBar,style:{width:`${v}%`}})]})};function F(){const[e,d]=a.useState([]),[i,t]=a.useState(!1),[c,u]=a.useState(null);return a.useEffect(()=>{d(y),t(!0)},[]),s.jsxs("main",{children:[s.jsx("div",{className:"slider-container",children:i&&e.length>0?s.jsx("div",{children:e.map((o,g)=>s.jsx(q,{index:g,songName:o.songName,songimg:o.songimg,songCut:o.songCut,author:o.author,authorLink:o.authorLink,setCurrentPlaying:u,currentPlaying:c},g))}):s.jsx("div",{children:"Loading..."})}),s.jsx(C,{})]})}export{F as default};
//# sourceMappingURL=App-DyF2hwo6.js.map
