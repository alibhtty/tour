import{j as e,r as a,u as b,I as y}from"./index-C7HoLzoC.js";const C=()=>e.jsxs("nav",{className:"bottom-nav",children:[e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-home"})}),e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-search"})}),e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-plus"})}),e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-commenting"})}),e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-user"})})]});let p=[];function k(s){const[d,i]=a.useState(!1),t=a.useMemo(()=>new IntersectionObserver(([c])=>{i(c.isIntersecting),c.isIntersecting&&p.forEach(u=>{u!==s.current?u.pause():u.play()})}),[]);return a.useEffect(()=>(p.push(s.current),t.observe(s.current),()=>{p=p.filter(c=>c!==s.current),t.disconnect()}),[s,t]),d}const E=""+new URL("mixtape-B4dAbi3V.svg",import.meta.url).href,w="_sliderContainer_2gfd2_1",L="_sliderWrapper_2gfd2_17",S="_sliderChildren_2gfd2_26",$="_audioContent_2gfd2_61",P="_backgroundImage_2gfd2_91",B="_playing_2gfd2_103",O="_songImage_2gfd2_108",T="_audioOverlay_2gfd2_127",V="_playIcon_2gfd2_140",A="_progressBar_2gfd2_147",n={sliderContainer:w,sliderWrapper:L,sliderChildren:S,audioContent:$,backgroundImage:P,playing:B,songImage:O,audioOverlay:T,playIcon:V,progressBar:A},D="_container_ovl0p_10",M="_slider_ovl0p_31",R="_circle_ovl0p_58",U="_active_ovl0p_72",f={container:D,slider:M,circle:R,active:U,"dark-mode":"_dark-mode_ovl0p_81","light-mode":"_light-mode_ovl0p_87"},W=()=>{const[s,d]=a.useState(!1),i=b(),t=()=>{document.body.classList.toggle("dark-mode"),d(!s),i(s?"/":"/4b")};return e.jsx("div",{className:f.container,children:e.jsx("div",{className:`${f.slider} ${s?f.active:""}`,onClick:t,children:e.jsx("div",{className:f.circle})})})},q=({index:s,songName:d,songimg:i,songCut:t,author:c,authorLink:u,setCurrentPlaying:o,currentPlaying:g})=>{const l=a.useRef(),h=k(l),[_,m]=a.useState(!0),[v,j]=a.useState(0);a.useEffect(()=>{l.current;const r=()=>{h&&g!==s&&o(s)};return r(),window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[h,g,s,o]),a.useEffect(()=>{const r=l.current;g===s?(r.play(),m(!1)):(r.pause(),m(!0))},[g,s]);const x=()=>{l.current.paused?(l.current.play(),m(!1),o(s)):(l.current.pause(),m(!0))},N=()=>{const r=l.current;if(r){const I=r.currentTime/r.duration*100;j(I)}};return e.jsxs("div",{className:n.sliderChildren,children:[e.jsx("div",{className:`${n.backgroundImage} ${_?"":n.playing}`,style:{backgroundImage:`url(${i})`}}),e.jsx("img",{src:i,alt:d,className:`${n.songImage} ${_?"":n.playing}`}),e.jsx("audio",{className:n.audio,ref:l,id:s,onTimeUpdate:N,children:e.jsx("source",{src:t,type:"audio/mp3"})}),e.jsx("div",{className:n.audioOverlay,onClick:x,children:_&&e.jsx("img",{src:E,alt:"Play",className:n.playIcon})}),e.jsxs("div",{className:n.audioContent,children:[e.jsxs("p",{className:"m-0",children:["@",c]}),e.jsxs("p",{children:["Post by ",e.jsx("a",{href:u,children:c})," en Mixtape"]})]}),e.jsx(W,{}),e.jsx("div",{className:n.progressBar,style:{width:`${v}%`}})]})};function F(){const[s,d]=a.useState([]),[i,t]=a.useState(!1),[c,u]=a.useState(null);return a.useEffect(()=>{d(y),t(!0)},[]),e.jsxs("main",{children:[e.jsx("div",{className:"slider-container",children:i&&s.length>0?e.jsx("div",{children:s.map((o,g)=>e.jsx(q,{index:g,songName:o.songName,songimg:o.songimg,songCut:o.songCut,author:o.author,authorLink:o.authorLink,setCurrentPlaying:u,currentPlaying:c},g))}):e.jsx("div",{children:"Loading..."})}),e.jsx(C,{})]})}export{F as default};
//# sourceMappingURL=App-gzmGK76F.js.map
