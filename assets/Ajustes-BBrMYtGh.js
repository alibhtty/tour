import{r as o,j as e,L as k,W as D,X as P,Y as F,Z as R,$ as H}from"./index-C7HoLzoC.js";const $="_userTable_1lmlq_49",M="_miCuenta_1lmlq_57",E="_inactiveSession_1lmlq_65",O="_iniciarSesion_1lmlq_68",U="_userName_1lmlq_73",L="_faqContainer_1lmlq_93",G="_details_1lmlq_120",V="_expandIcon_1lmlq_135",W="_faqTitle_1lmlq_148",K="_summary_1lmlq_154",X="_faqContent_1lmlq_195",Y="_avisoIcon_1lmlq_212",Z="_iconSection_1lmlq_217",J="_profileIcon_1lmlq_223",Q="_iconOption_1lmlq_231",ee="_iconSelector_1lmlq_239",te="_profileSection_1lmlq_254",ae="_profilePic_1lmlq_260",se="_avatarSelector_1lmlq_273",ne="_avatarActions_1lmlq_284",oe="_actionButtonGuardar_1lmlq_291",ie="_actionButtonDescartar_1lmlq_295",re="_avatarOption_1lmlq_304",t={userTable:$,miCuenta:M,inactiveSession:E,iniciarSesion:O,userName:U,faqContainer:L,details:G,expandIcon:V,faqTitle:W,summary:K,faqContent:X,avisoIcon:Y,iconSection:Z,profileIcon:J,iconOption:Q,iconSelector:ee,profileSection:te,profilePic:ae,avatarSelector:se,avatarActions:ne,actionButtonGuardar:oe,actionButtonDescartar:ie,avatarOption:re},T=""+new URL("img-init-w-lt7qUmmT.png",import.meta.url).href,ce=()=>{const[f,u]=o.useState([]),[v,g]=o.useState(0),[p,a]=o.useState(!1),[d,m]=o.useState(null),[_,b]=o.useState(!0),l=async()=>{if("caches"in window){const s=await caches.keys();let n=0;const h=(await Promise.all(s.map(async c=>{const i=await caches.open(c),w=await i.keys();return(await Promise.all(w.map(async N=>{const A=await i.match(N);if(A){const z=await A.clone().blob(),B=z.size;return n+=B,{url:N.url,blobUrl:URL.createObjectURL(z),size:B}}return null}))).filter(Boolean)}))).flat().map(c=>{let i=Math.round(c.size/1024);const w=i<1024?`${i} KB`:`${Math.round(i/1024)} MB`;return{...c,sizeLabel:w}});h.sort((c,i)=>i.size-c.size),u(h),g(Math.round(n/1024/1024))}},x=async()=>{if("caches"in window){const s=await caches.keys();await Promise.all(s.map(n=>caches.delete(n))),u([]),g(0)}};o.useEffect(()=>{l()},[]);const S=s=>{m(s),b(!1)},C=()=>{m(null),b(!0)},q=()=>{a(!p)},I=s=>{s.target.src=T};return e.jsxs("div",{style:{padding:"20px",backgroundColor:"#222",borderRadius:"1em",position:"relative",overflow:"hidden",marginBottom:"8em"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,bottom:0,width:"35%",backgroundImage:"url(/image/app/delete-cache.png)",backgroundSize:"cover",maxHeight:"20vh",backgroundPosition:"center",opacity:.5,zIndex:0}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsx("h3",{style:{color:"#fff"},children:"Almacenamiento:"}),e.jsxs("button",{onClick:x,style:{marginBottom:"1em",marginTop:"1.5em",padding:"12px 20px",backgroundColor:"#570f0f",color:"#ff4c4c",fontWeight:"600",border:"none",borderRadius:"50px",cursor:"pointer",transition:"background-color 0.3s"},onMouseEnter:s=>s.target.style.backgroundColor="#402727",onMouseLeave:s=>s.target.style.backgroundColor="#570f0f",children:["Borrar ",v,"MB en Caché"]}),e.jsxs("h4",{style:{color:"#999",fontSize:"10px",cursor:"pointer",marginBottom:"1em"},children:[" El espacio en caché se utiliza ",e.jsx("br",{})," mejorar para la fluidez de la app."]})," ",e.jsx("br",{}),e.jsxs("div",{children:[e.jsxs("h4",{style:{color:"#eee",fontSize:"12px",cursor:"pointer"},onClick:q,children:[p?"Ocultar":"Ver"," archivos en caché"]}),p&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",transition:"all 0.3s ease"},children:f.length>0?f.map((s,n)=>e.jsxs("div",{style:{position:"relative",borderRadius:8,backgroundColor:"#222",width:"100%",paddingBottom:"100%",overflow:"hidden",cursor:"pointer"},onClick:()=>S(s),children:[e.jsx("img",{src:s.blobUrl,alt:`img ${n}`,onError:I,style:{position:"absolute",top:0,left:0,fontSize:"8px",width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",opacity:.3}}),e.jsx("div",{style:{position:"absolute",display:"flex",width:"100%",justifyContent:"center",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#f1f1f1",fontWeight:"bold",fontSize:"11px",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"},children:s.sizeLabel})]},n)):e.jsx("p",{style:{color:"#999",minWidth:"4em",width:"100%",fontSize:"12px",textAlign:"center",marginTop:"1.5em"},children:"Sin archivos en caché"})})]}),d&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(20px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,overflow:"hidden"},onClick:C,children:e.jsx("img",{src:d.blobUrl||T,alt:"img",style:{maxWidth:"60%",maxHeight:"60%",borderRadius:"8px"}})}),e.jsx("style",{children:`
            @media (min-width: 1024px) {
              div[style*="grid-template-columns"] {
                grid-template-columns: repeat(8, 1fr) !important;
              }
            }
          `})]})]})},y=["./image/app/users/00.jpg","./image/app/users/01.jpg","./image/app/users/02.jpg","./image/app/users/03.jpg","./image/app/users/04.jpg","./image/app/users/05.jpg"],le=({title:f,content:u})=>{const v=o.useRef(null),g=p=>{p.preventDefault();const a=v.current,d=a.querySelector("summary"),m=a.querySelector(`.${t.faqContent}`),_=d.querySelector(`.${t.expandIcon}`);a.open?(a.style.height=`${a.offsetHeight}px`,a.animate({height:[`${a.offsetHeight}px`,`${d.offsetHeight}px`]},{duration:400,easing:"ease-out"}).onfinish=()=>{a.open=!1,a.style.height="",_.style.transform="rotate(0deg)"}):(a.style.height=`${a.offsetHeight}px`,a.open=!0,window.requestAnimationFrame(()=>{a.animate({height:[`${a.offsetHeight}px`,`${d.offsetHeight+m.offsetHeight}px`]},{duration:400,easing:"ease-out"}).onfinish=()=>{a.style.height="",_.style.transform="rotate(90deg)"}}))};return e.jsxs("details",{ref:v,onClick:g,className:t.details,children:[e.jsxs("summary",{className:t.summary,children:[e.jsx("span",{className:t.faqTitle,children:f}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.expandIcon,width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M9 6l6 6-6 6"})]})]}),e.jsx("div",{className:t.faqContent,children:u})]})},pe=()=>{const[f,u]=o.useState("Anónimo"),[v,g]=o.useState(""),[p,a]=o.useState(y[0]),[d,m]=o.useState(!1),[_,b]=o.useState(!1),[l,x]=o.useState(null);o.useEffect(()=>{(async()=>{const r=D(),j=P(),h=r.currentUser;if(h){b(!0);const c=await F(R(j,"users",h.uid));if(c.exists()){const i=c.data();u(i.name),g(i.registrationDate),a(i.profilePic||y[0])}}else{b(!1);const c=localStorage.getItem("avatar");a(c||y[0]),u("Anónimo")}})()},[]);const S=()=>{m(!d)},C=n=>{x(n)},q=async()=>{const r=D().currentUser;if(r&&l){const j=P(),h=R(j,"users",r.uid);await H(h,{profilePic:l}),a(l),x(null),m(!1)}else!r&&l&&(localStorage.setItem("avatar",l),a(l),x(null),m(!1))},I=()=>{x(null),m(!1)},s=[{title:"Cómo instalar en iOS",content:"Presiona en 'Compartir' y luego 'Añadir a pantalla de Inicio'."},{title:"Cómo instalar en Android",content:"Presiona en 'Compartir' y luego 'Añadir al Home'."}];return e.jsxs("div",{className:t.faqContainer,children:[e.jsxs("div",{className:t.profileSection,children:[e.jsx("img",{src:l||p,alt:"Avatar",className:t.profilePic,onClick:S}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.avatarSelector,children:y.map((n,r)=>e.jsx("img",{src:n,alt:`Avatar ${r+1}`,className:t.avatarOption,onClick:()=>C(n)},r))}),l&&e.jsxs("div",{className:t.avatarActions,children:[e.jsx("button",{className:t.actionButtonGuardar,onClick:q,children:"Guardar"}),e.jsx("button",{className:t.actionButtonDescartar,onClick:I,children:"Descartar"})]})]})]}),e.jsxs("section",{className:t.userTable,children:[e.jsxs(k,{className:t.miCuenta,to:"/profile",children:[" Nick",e.jsx("div",{className:t.userName,children:f})]}),_?e.jsxs("div",{className:t.miCuenta,children:["Sesión",e.jsx("div",{className:t.userName,children:"activa"})]}):e.jsx(k,{className:t.miCuenta,to:"/login",style:{backgroundImage:"linear-gradient(to right, rgba(68,193,81,.3) 0%, rgba(53,80,53,.8) 20%, rgba(145, 255, 202,.45) )"},children:e.jsx("div",{className:t.iniciarSesion,children:"Iniciar Sesión"})}),e.jsxs(k,{className:t.miCuenta,to:"/4b",children:[" Versión",e.jsx("div",{className:t.userName,children:"4.1"})]})]}),s.map((n,r)=>e.jsx(le,{title:n.title,content:n.content},r)),e.jsx(ce,{})]})};export{pe as default};
//# sourceMappingURL=Ajustes-BBrMYtGh.js.map
